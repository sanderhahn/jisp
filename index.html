<!doctype html>
<html>
<title>Jisp ~ Javascript Lisp</title>
<style>@import url('style.css');</style>
</head>
<body>

<div class="container">
  <h1>Jisp ~ Javascript Lisp</h1>

  <p>Parsing S-expressions with <a href="http://zaach.github.com/jison/">Jison</a> and a simple Lisp like interpreter for fun.</p>

  <label>Source</label>
  <textarea class="source" style="width: 100%" rows="20">(print (cons (* (- 5 9) 0) '(1 2 3)))</textarea>

  <button id="run">Run</button>

  <label>Output</label>
  <textarea class="console" style="width: 100%" rows="20"></textarea>
</div>

<script src="lib/jquery-1.7.min.js"></script>
<script src="lib/underscore-min.js"></script>
<script src="core.js"></script>
<script src="jisp.js"></script>
<script src="asserts.js"></script>
<script>
var console_print

$(function() {

  var console = $('.console')

  console_print = function(str) {
    console.val(console.val() + str + "\n")
  }
  
  $('#run').click(function() {
    var src = $('.source').val();
    try {
      var value = eval(read(src), initial_environment)
      if(value !== undefined) {
        console_print(print(value))
      }
    } catch(e) {
      console_print(e);
    }
  })
  
})
</script>
</body>
</html>