<!doctype html>
<html>
<title>Jisp ~ Javascript Lisp</title>
<style>@import url('style.css');</style>
</head>
<body>

<div class="container">
  <h1>Jisp ~ Javascript Lisp</h1>

  <p>Parsing S-expressions with <a href="http://zaach.github.com/jison/">Jison</a> and a simple Lisp like interpreter for fun.</p>

  <label>Source</label>
  <textarea class="source" style="width: 100%" rows="20">(+ (- 5 9) 6)</textarea>

  <button id="run">Run</button>

  <label>Output</label>
  <textarea class="console" style="width: 100%" rows="20"></textarea>
</div>

<script src="jquery-1.7.min.js"></script>
<script src="underscore-min.js"></script>
<script src="core.js"></script>
<script src="jisp.js"></script>
<script>
$(function() {
  function assert(value, message) {
    if(!value) {
      throw 'Assertion failed: ' + message
    }
  }
  
  var console = $('.console')

  function console_print(str) {
    console.val(console.val() + str + "\n")
  }
  
  $('#run').click(function() {
    var src = $('.source').val();
    console_print(print(read(src)))
  })

  // test read and print
  
  var test = ['#t', '(1 . 2)', '(1 2 . 3)', '(1 2 3)', '()', '((1) (1 . 2) (1 (3 (4))))']
  _.each(test, function(item) {
    assert(print(read(item)) === item, item)
  })
})
</script>
</body>
</html>